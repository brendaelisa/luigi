<<<<<<< HEAD
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Juego Plataforma Web</title>
  <link rel="icon" href="data:,">

  <style>
    body {
      margin: 0;
      background: #87CEEB; /* azul cielo */
      overflow: hidden;
      user-select: none;
      touch-action: none;
    }
    canvas {
      display: block;
      margin: 0 auto;
      background: #87CEEB;
      border: 2px solid #333;
      max-width: 100vw;
      height: 600px;
    }
    #controls {
      position: fixed;
      bottom: 10px;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 10px;
      user-select: none;
    }
    button {
      padding: 10px 15px;
      font-size: 18px;
      border-radius: 8px;
      border: none;
      background: #444;
      color: white;
      opacity: 0.7;
    }
    button:active {
      background: #222;
    }
  </style>
</head>
<body>
  <canvas id="game" width="1000" height="600"></canvas>

  <!-- Controles táctiles -->
  <div id="controls">
    <button id="leftBtn">◀</button>
    <button id="jumpBtn">▲</button>
    <button id="rightBtn">▶</button>
  </div>

<script>
(() => {
  const canvas = document.getElementById('game');
  const ctx = canvas.getContext('2d');

  // Variables del juego
  const WIDTH = canvas.width;
  const HEIGHT = canvas.height;

  // Colores
  const COLOR_PLATAFORMA = '#8B4513';
  const COLOR_JUGADOR = '#FF4500'; // naranja fuerte
  const COLOR_MONEDA = '#FFD700';
  const COLOR_ENEMIGO = '#0000CD';
  const COLOR_META = '#228B22'; // verde meta
  const COLOR_FONDO = '#87CEEB';

  // Física
  const GRAVEDAD = 0.7;
  const FRICTION = 0.8;
  const MAX_VEL_X = 7;
  const SALTO_FUERZA = -15;

  // Estado del jugador
  let jugador = {
    x: 50,
    y: HEIGHT - 70,
    radio: 20,
    velX: 0,
    velY: 0,
    enSuelo: false,
    saltosRestantes: 2,
    vidas: 3,
    puntos: 0
  };

  // Cámara (para scroll horizontal)
  let camaraX = 0;

  // Teclas
  let teclas = {
    left: false,
    right: false,
    jump: false
  };

  // Plataformas (x, y, ancho, alto)
  const plataformas = [
    {x: 0, y: HEIGHT - 50, width: 1000, height: 50},
    {x: 200, y: HEIGHT - 150, width: 150, height: 20},
    {x: 450, y: HEIGHT - 230, width: 150, height: 20},
    {x: 700, y: HEIGHT - 180, width: 100, height: 20},
    {x: 900, y: HEIGHT - 250, width: 200, height: 20},
    {x: 1200, y: HEIGHT - 130, width: 200, height: 20},
    {x: 1500, y: HEIGHT - 210, width: 250, height: 20},
    {x: 1800, y: HEIGHT - 60, width: 300, height: 20},
  ];

  // Monedas (x, y, radio)
  let monedas = [
    {x: 250, y: HEIGHT - 180, radio: 10, recogida: false},
    {x: 500, y: HEIGHT - 260, radio: 10, recogida: false},
    {x: 950, y: HEIGHT - 280, radio: 10, recogida: false},
    {x: 1300, y: HEIGHT - 160, radio: 10, recogida: false},
    {x: 1650, y: HEIGHT - 240, radio: 10, recogida: false},
  ];

  // Enemigos (x, y, width, height, velocidad)
  let enemigos = [
    {x: 300, y: HEIGHT - 70, width: 40, height: 40, dir: 1, speed: 3, minX: 300, maxX: 500},
    {x: 850, y: HEIGHT - 290, width: 40, height: 40, dir: -1, speed: 2, minX: 850, maxX: 1100},
    {x: 1600, y: HEIGHT - 70, width: 40, height: 40, dir: 1, speed: 3, minX: 1600, maxX: 1800},
  ];

  // Meta (x, y, ancho, alto)
  const meta = {x: 2100, y: HEIGHT - 110, width: 60, height: 60};

  // Estado juego
  let juegoTerminado = false;
  let mensajeVictoria = '';
  let mensajeDerrota = '';

  // --- Funciones --- //

  function dibujarRect(x, y, w, h, color) {
    ctx.fillStyle = color;
    ctx.fillRect(x, y, w, h);
  }

  function dibujarCirculo(x, y, r, color) {
    ctx.fillStyle = color;
    ctx.beginPath();
    ctx.arc(x, y, r, 0, Math.PI * 2);
    ctx.fill();
  }

  function colisionCirculoRect(cx, cy, r, rx, ry, rw, rh) {
    // Colisión círculo-rectángulo
    // Encontrar punto más cercano en rectángulo al centro del círculo
    let closestX = Math.max(rx, Math.min(cx, rx + rw));
    let closestY = Math.max(ry, Math.min(cy, ry + rh));

    // Distancia entre el centro y el punto más cercano
    let distX = cx - closestX;
    let distY = cy - closestY;

    return (distX * distX + distY * distY) < (r * r);
  }

  // Detección colisión jugador y plataformas
  function detectarColisionPlataformas() {
    jugador.enSuelo = false;

    for (let p of plataformas) {
      // Solo colisión si jugador está cayendo o tocando suelo
      if (jugador.velY >= 0 &&
          colisionCirculoRect(jugador.x, jugador.y + jugador.radio, jugador.radio, p.x, p.y, p.width, p.height)) {
        jugador.y = p.y - jugador.radio;
        jugador.velY = 0;
        jugador.enSuelo = true;
        jugador.saltosRestantes = 2;
        break;
      }
    }
  }

  // Mover enemigos
  function moverEnemigos() {
    for (let e of enemigos) {
      e.x += e.speed * e.dir;
      if (e.x < e.minX) {
        e.x = e.minX;
        e.dir *= -1;
      } else if (e.x + e.width > e.maxX) {
        e.x = e.maxX - e.width;
        e.dir *= -1;
      }
    }
  }

  // Verificar colisiones jugador-enemigos
  function verificarColisionesEnemigos() {
    for (let e of enemigos) {
      if (colisionCirculoRect(jugador.x, jugador.y, jugador.radio, e.x, e.y, e.width, e.height)) {
        perderVida();
        break;
      }
    }
  }

  // Verificar colisión monedas
  function verificarMonedas() {
    for (let m of monedas) {
      if (!m.recogida) {
        let dx = jugador.x - m.x;
        let dy = jugador.y - m.y;
        let dist = Math.sqrt(dx * dx + dy * dy);
        if (dist < jugador.radio + m.radio) {
          m.recogida = true;
          jugador.puntos += 10;
          // Sonido o efecto aquí si quieres
        }
      }
    }
  }

  // Perder vida
  function perderVida() {
    jugador.vidas--;
    if (jugador.vidas <= 0) {
      juegoTerminado = true;
      mensajeDerrota = '¡Has perdido! Presiona "R" para reiniciar.';
    } else {
      // Reiniciar posición
      jugador.x = 50;
      jugador.y = HEIGHT - 70;
      jugador.velX = 0;
      jugador.velY = 0;
      jugador.saltosRestantes = 2;
    }
  }

  // Verificar caída
  function verificarCaida() {
    if (jugador.y - jugador.radio > HEIGHT) {
      perderVida();
    }
  }

  // Verificar meta
  function verificarMeta() {
    if (jugador.x + jugador.radio > meta.x &&
        jugador.x - jugador.radio < meta.x + meta.width &&
        jugador.y + jugador.radio > meta.y &&
        jugador.y - jugador.radio < meta.y + meta.height) {
      juegoTerminado = true;
      mensajeVictoria = '¡Victoria! "Todo lo puedo en Cristo que me fortalece" - Filipenses 4:13';
    }
  }

  // Manejo de controles teclado
  window.addEventListener('keydown', (e) => {
    if (juegoTerminado) {
      if (e.key.toLowerCase() === 'r') reiniciarJuego();
      return;
    }
    if (e.key === 'ArrowLeft') teclas.left = true;
    if (e.key === 'ArrowRight') teclas.right = true;
    if (e.key === 'ArrowUp' || e.key === ' ') {
      if (jugador.saltosRestantes > 0) {
        jugador.velY = SALTO_FUERZA;
        jugador.saltosRestantes--;
      }
    }
  });

  window.addEventListener('keyup', (e) => {
    if (e.key === 'ArrowLeft') teclas.left = false;
    if (e.key === 'ArrowRight') teclas.right = false;
  });

  // Controles táctiles (botones)
  document.getElementById('leftBtn').addEventListener('touchstart', e => { teclas.left = true; e.preventDefault(); });
  document.getElementById('leftBtn').addEventListener('touchend', e => { teclas.left = false; e.preventDefault(); });
  document.getElementById('rightBtn').addEventListener('touchstart', e => { teclas.right = true; e.preventDefault(); });
  document.getElementById('rightBtn').addEventListener('touchend', e => { teclas.right = false; e.preventDefault(); });
  document.getElementById('jumpBtn').addEventListener('touchstart', e => {
    if (jugador.saltosRestantes > 0) {
      jugador.velY = SALTO_FUERZA;
      jugador.saltosRestantes--;
    }
    e.preventDefault();
  });

  // Reiniciar juego
  function reiniciarJuego() {
    jugador.x = 50;
    jugador.y = HEIGHT - 70;
    jugador.velX = 0;
    jugador.velY = 0;
    jugador.enSuelo = false;
    jugador.saltosRestantes = 2;
    jugador.vidas = 3;
    jugador.puntos = 0;
    monedas.forEach(m => m.recogida = false);
    juegoTerminado = false;
    mensajeVictoria = '';
    mensajeDerrota = '';
  }

  // Actualizar estado jugador
  function actualizarJugador() {
    // Mover horizontal
    if (teclas.left) {
      jugador.velX -= 1;
    } else if (teclas.right) {
      jugador.velX += 1;
    } else {
      jugador.velX *= FRICTION;
      if (Math.abs(jugador.velX) < 0.1) jugador.velX = 0;
    }

    // Limitar velocidad
    if (jugador.velX > MAX_VEL_X) jugador.velX = MAX_VEL_X;
    if (jugador.velX < -MAX_VEL_X) jugador.velX = -MAX_VEL_X;

    jugador.x += jugador.velX;

    // Aplicar gravedad
    jugador.velY += GRAVEDAD;
    jugador.y += jugador.velY;

    detectarColisionPlataformas();
  }

  // Dibujar todo
  function dibujar() {
    ctx.clearRect(0, 0, WIDTH, HEIGHT);

    // Fondo
    ctx.fillStyle = COLOR_FONDO;
    ctx.fillRect(0, 0, WIDTH, HEIGHT);

    // Ajustar cámara (scroll horizontal)
    camaraX = jugador.x - WIDTH / 2;
    if (camaraX < 0) camaraX = 0;

    // Plataformas
    for (let p of plataformas) {
      dibujarRect(p.x - camaraX, p.y, p.width, p.height, COLOR_PLATAFORMA);
    }

    // Monedas
    for (let m of monedas) {
      if (!m.recogida) {
        dibujarCirculo(m.x - camaraX, m.y, m.radio, COLOR_MONEDA);
      }
    }

    // Enemigos
    for (let e of enemigos) {
      dibujarRect(e.x - camaraX, e.y, e.width, e.height, COLOR_ENEMIGO);
    }

    // Meta
    dibujarRect(meta.x - camaraX, meta.y, meta.width, meta.height, COLOR_META);

    // Jugador
    dibujarCirculo(jugador.x - camaraX, jugador.y, jugador.radio, COLOR_JUGADOR);

    // HUD: Vidas y puntos
    ctx.fillStyle = '#000';
    ctx.font = '20px Arial';
    ctx.fillText(`Vidas: ${jugador.vidas}`, 20, 30);
    ctx.fillText(`Puntos: ${jugador.puntos}`, 20, 60);

    if (juegoTerminado) {
      ctx.fillStyle = '#000';
      ctx.font = '30px Arial';
      ctx.textAlign = 'center';
      if (mensajeVictoria) {
        ctx.fillStyle = 'green';
        ctx.fillText(mensajeVictoria, WIDTH/2, HEIGHT/2);
      }
      if (mensajeDerrota) {
        ctx.fillStyle = 'red';
        ctx.fillText(mensajeDerrota, WIDTH/2, HEIGHT/2);
      }
      ctx.textAlign = 'start';
    }
  }

  // Bucle principal
  function loop() {
    if (!juegoTerminado) {
      actualizarJugador();
      moverEnemigos();
      verificarColisionesEnemigos();
      verificarMonedas();
      verificarCaida();
      verificarMeta();
    }

    dibujar();
    requestAnimationFrame(loop);
  }

  loop();

})();
</script>

</body>
</html>
=======
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Juego Plataforma Web</title>
  <link rel="icon" href="data:,">

  <style>
    body {
      margin: 0;
      background: #87CEEB; /* azul cielo */
      overflow: hidden;
      user-select: none;
      touch-action: none;
    }
    canvas {
      display: block;
      margin: 0 auto;
      background: #87CEEB;
      border: 2px solid #333;
      max-width: 100vw;
      height: 600px;
    }
    #controls {
      position: fixed;
      bottom: 10px;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 10px;
      user-select: none;
    }
    button {
      padding: 10px 15px;
      font-size: 18px;
      border-radius: 8px;
      border: none;
      background: #444;
      color: white;
      opacity: 0.7;
    }
    button:active {
      background: #222;
    }
  </style>
</head>
<body>
  <canvas id="game" width="1000" height="600"></canvas>

  <!-- Controles táctiles -->
  <div id="controls">
    <button id="leftBtn">◀</button>
    <button id="jumpBtn">▲</button>
    <button id="rightBtn">▶</button>
  </div>

<script>
(() => {
  const canvas = document.getElementById('game');
  const ctx = canvas.getContext('2d');

  // Variables del juego
  const WIDTH = canvas.width;
  const HEIGHT = canvas.height;

  // Colores
  const COLOR_PLATAFORMA = '#8B4513';
  const COLOR_JUGADOR = '#FF4500'; // naranja fuerte
  const COLOR_MONEDA = '#FFD700';
  const COLOR_ENEMIGO = '#0000CD';
  const COLOR_META = '#228B22'; // verde meta
  const COLOR_FONDO = '#87CEEB';

  // Física
  const GRAVEDAD = 0.7;
  const FRICTION = 0.8;
  const MAX_VEL_X = 7;
  const SALTO_FUERZA = -15;

  // Estado del jugador
  let jugador = {
    x: 50,
    y: HEIGHT - 70,
    radio: 20,
    velX: 0,
    velY: 0,
    enSuelo: false,
    saltosRestantes: 2,
    vidas: 3,
    puntos: 0
  };

  // Cámara (para scroll horizontal)
  let camaraX = 0;

  // Teclas
  let teclas = {
    left: false,
    right: false,
    jump: false
  };

  // Plataformas (x, y, ancho, alto)
  const plataformas = [
    {x: 0, y: HEIGHT - 50, width: 1000, height: 50},
    {x: 200, y: HEIGHT - 150, width: 150, height: 20},
    {x: 450, y: HEIGHT - 230, width: 150, height: 20},
    {x: 700, y: HEIGHT - 180, width: 100, height: 20},
    {x: 900, y: HEIGHT - 250, width: 200, height: 20},
    {x: 1200, y: HEIGHT - 130, width: 200, height: 20},
    {x: 1500, y: HEIGHT - 210, width: 250, height: 20},
    {x: 1800, y: HEIGHT - 60, width: 300, height: 20},
  ];

  // Monedas (x, y, radio)
  let monedas = [
    {x: 250, y: HEIGHT - 180, radio: 10, recogida: false},
    {x: 500, y: HEIGHT - 260, radio: 10, recogida: false},
    {x: 950, y: HEIGHT - 280, radio: 10, recogida: false},
    {x: 1300, y: HEIGHT - 160, radio: 10, recogida: false},
    {x: 1650, y: HEIGHT - 240, radio: 10, recogida: false},
  ];

  // Enemigos (x, y, width, height, velocidad)
  let enemigos = [
    {x: 300, y: HEIGHT - 70, width: 40, height: 40, dir: 1, speed: 3, minX: 300, maxX: 500},
    {x: 850, y: HEIGHT - 290, width: 40, height: 40, dir: -1, speed: 2, minX: 850, maxX: 1100},
    {x: 1600, y: HEIGHT - 70, width: 40, height: 40, dir: 1, speed: 3, minX: 1600, maxX: 1800},
  ];

  // Meta (x, y, ancho, alto)
  const meta = {x: 2100, y: HEIGHT - 110, width: 60, height: 60};

  // Estado juego
  let juegoTerminado = false;
  let mensajeVictoria = '';
  let mensajeDerrota = '';

  // --- Funciones --- //

  function dibujarRect(x, y, w, h, color) {
    ctx.fillStyle = color;
    ctx.fillRect(x, y, w, h);
  }

  function dibujarCirculo(x, y, r, color) {
    ctx.fillStyle = color;
    ctx.beginPath();
    ctx.arc(x, y, r, 0, Math.PI * 2);
    ctx.fill();
  }

  function colisionCirculoRect(cx, cy, r, rx, ry, rw, rh) {
    // Colisión círculo-rectángulo
    // Encontrar punto más cercano en rectángulo al centro del círculo
    let closestX = Math.max(rx, Math.min(cx, rx + rw));
    let closestY = Math.max(ry, Math.min(cy, ry + rh));

    // Distancia entre el centro y el punto más cercano
    let distX = cx - closestX;
    let distY = cy - closestY;

    return (distX * distX + distY * distY) < (r * r);
  }

  // Detección colisión jugador y plataformas
  function detectarColisionPlataformas() {
    jugador.enSuelo = false;

    for (let p of plataformas) {
      // Solo colisión si jugador está cayendo o tocando suelo
      if (jugador.velY >= 0 &&
          colisionCirculoRect(jugador.x, jugador.y + jugador.radio, jugador.radio, p.x, p.y, p.width, p.height)) {
        jugador.y = p.y - jugador.radio;
        jugador.velY = 0;
        jugador.enSuelo = true;
        jugador.saltosRestantes = 2;
        break;
      }
    }
  }

  // Mover enemigos
  function moverEnemigos() {
    for (let e of enemigos) {
      e.x += e.speed * e.dir;
      if (e.x < e.minX) {
        e.x = e.minX;
        e.dir *= -1;
      } else if (e.x + e.width > e.maxX) {
        e.x = e.maxX - e.width;
        e.dir *= -1;
      }
    }
  }

  // Verificar colisiones jugador-enemigos
  function verificarColisionesEnemigos() {
    for (let e of enemigos) {
      if (colisionCirculoRect(jugador.x, jugador.y, jugador.radio, e.x, e.y, e.width, e.height)) {
        perderVida();
        break;
      }
    }
  }

  // Verificar colisión monedas
  function verificarMonedas() {
    for (let m of monedas) {
      if (!m.recogida) {
        let dx = jugador.x - m.x;
        let dy = jugador.y - m.y;
        let dist = Math.sqrt(dx * dx + dy * dy);
        if (dist < jugador.radio + m.radio) {
          m.recogida = true;
          jugador.puntos += 10;
          // Sonido o efecto aquí si quieres
        }
      }
    }
  }

  // Perder vida
  function perderVida() {
    jugador.vidas--;
    if (jugador.vidas <= 0) {
      juegoTerminado = true;
      mensajeDerrota = '¡Has perdido! Presiona "R" para reiniciar.';
    } else {
      // Reiniciar posición
      jugador.x = 50;
      jugador.y = HEIGHT - 70;
      jugador.velX = 0;
      jugador.velY = 0;
      jugador.saltosRestantes = 2;
    }
  }

  // Verificar caída
  function verificarCaida() {
    if (jugador.y - jugador.radio > HEIGHT) {
      perderVida();
    }
  }

  // Verificar meta
  function verificarMeta() {
    if (jugador.x + jugador.radio > meta.x &&
        jugador.x - jugador.radio < meta.x + meta.width &&
        jugador.y + jugador.radio > meta.y &&
        jugador.y - jugador.radio < meta.y + meta.height) {
      juegoTerminado = true;
      mensajeVictoria = '¡Victoria! "Todo lo puedo en Cristo que me fortalece" - Filipenses 4:13';
    }
  }

  // Manejo de controles teclado
  window.addEventListener('keydown', (e) => {
    if (juegoTerminado) {
      if (e.key.toLowerCase() === 'r') reiniciarJuego();
      return;
    }
    if (e.key === 'ArrowLeft') teclas.left = true;
    if (e.key === 'ArrowRight') teclas.right = true;
    if (e.key === 'ArrowUp' || e.key === ' ') {
      if (jugador.saltosRestantes > 0) {
        jugador.velY = SALTO_FUERZA;
        jugador.saltosRestantes--;
      }
    }
  });

  window.addEventListener('keyup', (e) => {
    if (e.key === 'ArrowLeft') teclas.left = false;
    if (e.key === 'ArrowRight') teclas.right = false;
  });

  // Controles táctiles (botones)
  document.getElementById('leftBtn').addEventListener('touchstart', e => { teclas.left = true; e.preventDefault(); });
  document.getElementById('leftBtn').addEventListener('touchend', e => { teclas.left = false; e.preventDefault(); });
  document.getElementById('rightBtn').addEventListener('touchstart', e => { teclas.right = true; e.preventDefault(); });
  document.getElementById('rightBtn').addEventListener('touchend', e => { teclas.right = false; e.preventDefault(); });
  document.getElementById('jumpBtn').addEventListener('touchstart', e => {
    if (jugador.saltosRestantes > 0) {
      jugador.velY = SALTO_FUERZA;
      jugador.saltosRestantes--;
    }
    e.preventDefault();
  });

  // Reiniciar juego
  function reiniciarJuego() {
    jugador.x = 50;
    jugador.y = HEIGHT - 70;
    jugador.velX = 0;
    jugador.velY = 0;
    jugador.enSuelo = false;
    jugador.saltosRestantes = 2;
    jugador.vidas = 3;
    jugador.puntos = 0;
    monedas.forEach(m => m.recogida = false);
    juegoTerminado = false;
    mensajeVictoria = '';
    mensajeDerrota = '';
  }

  // Actualizar estado jugador
  function actualizarJugador() {
    // Mover horizontal
    if (teclas.left) {
      jugador.velX -= 1;
    } else if (teclas.right) {
      jugador.velX += 1;
    } else {
      jugador.velX *= FRICTION;
      if (Math.abs(jugador.velX) < 0.1) jugador.velX = 0;
    }

    // Limitar velocidad
    if (jugador.velX > MAX_VEL_X) jugador.velX = MAX_VEL_X;
    if (jugador.velX < -MAX_VEL_X) jugador.velX = -MAX_VEL_X;

    jugador.x += jugador.velX;

    // Aplicar gravedad
    jugador.velY += GRAVEDAD;
    jugador.y += jugador.velY;

    detectarColisionPlataformas();
  }

  // Dibujar todo
  function dibujar() {
    ctx.clearRect(0, 0, WIDTH, HEIGHT);

    // Fondo
    ctx.fillStyle = COLOR_FONDO;
    ctx.fillRect(0, 0, WIDTH, HEIGHT);

    // Ajustar cámara (scroll horizontal)
    camaraX = jugador.x - WIDTH / 2;
    if (camaraX < 0) camaraX = 0;

    // Plataformas
    for (let p of plataformas) {
      dibujarRect(p.x - camaraX, p.y, p.width, p.height, COLOR_PLATAFORMA);
    }

    // Monedas
    for (let m of monedas) {
      if (!m.recogida) {
        dibujarCirculo(m.x - camaraX, m.y, m.radio, COLOR_MONEDA);
      }
    }

    // Enemigos
    for (let e of enemigos) {
      dibujarRect(e.x - camaraX, e.y, e.width, e.height, COLOR_ENEMIGO);
    }

    // Meta
    dibujarRect(meta.x - camaraX, meta.y, meta.width, meta.height, COLOR_META);

    // Jugador
    dibujarCirculo(jugador.x - camaraX, jugador.y, jugador.radio, COLOR_JUGADOR);

    // HUD: Vidas y puntos
    ctx.fillStyle = '#000';
    ctx.font = '20px Arial';
    ctx.fillText(`Vidas: ${jugador.vidas}`, 20, 30);
    ctx.fillText(`Puntos: ${jugador.puntos}`, 20, 60);

    if (juegoTerminado) {
      ctx.fillStyle = '#000';
      ctx.font = '30px Arial';
      ctx.textAlign = 'center';
      if (mensajeVictoria) {
        ctx.fillStyle = 'green';
        ctx.fillText(mensajeVictoria, WIDTH/2, HEIGHT/2);
      }
      if (mensajeDerrota) {
        ctx.fillStyle = 'red';
        ctx.fillText(mensajeDerrota, WIDTH/2, HEIGHT/2);
      }
      ctx.textAlign = 'start';
    }
  }

  // Bucle principal
  function loop() {
    if (!juegoTerminado) {
      actualizarJugador();
      moverEnemigos();
      verificarColisionesEnemigos();
      verificarMonedas();
      verificarCaida();
      verificarMeta();
    }

    dibujar();
    requestAnimationFrame(loop);
  }

  loop();

})();
</script>

</body>
</html>
>>>>>>> c7c219b8d29e0b2fb46df835ef7e54e1da09d4c4
